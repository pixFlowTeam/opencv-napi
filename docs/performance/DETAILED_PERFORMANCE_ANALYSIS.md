# ğŸ“Š Sharp vs chroma-js æ— æŸè°ƒèŠ‚æ€§èƒ½è¯¦ç»†åˆ†æ

## æµ‹è¯•ç¯å¢ƒ

- **æµ‹è¯•å›¾åƒ**: Sony A700 RAW (7028x4688 åƒç´ )
- **æµ‹è¯•æ ¼å¼**: TIFF (æ— æŸ)
- **æµ‹è¯•åœºæ™¯**: 7ç§ä¸åŒçš„è‰²æ¸©å’Œè‰²è°ƒç»„åˆ
- **æµ‹è¯•æ–¹æ³•**: å…¬å¹³å¯¹æ¯”ï¼Œç›¸åŒå‚æ•°å’Œè®¾ç½®

## æ€§èƒ½æµ‹è¯•ç»“æœ

### 1. å¤„ç†æ—¶é—´å¯¹æ¯”

| æ–¹æ³• | å¹³å‡å¤„ç†æ—¶é—´ | æœ€å¿« | æœ€æ…¢ | æ ‡å‡†å·® |
|------|-------------|------|------|--------|
| **Sharp** | 799ms | 720ms | 894ms | 67ms |
| **chroma-js** | 54,767ms | 54,089ms | 55,359ms | 347ms |

### 2. æ€§èƒ½å€æ•°å¯¹æ¯”

```
Sharp vs chroma-js æ€§èƒ½å€æ•°:
â”œâ”€â”€ æ€»ä½“æ€§èƒ½: 68.5x (Sharp å¿« 98.5%)
â”œâ”€â”€ åŠ è½½æ—¶é—´: 118x (Sharp å¿« 99.2%)
â”œâ”€â”€ è°ƒèŠ‚æ—¶é—´: 68.4x (Sharp å¿« 98.5%)
â””â”€â”€ å†…å­˜æ•ˆç‡: 1.4x (Sharp å°‘ç”¨ 30.4%)
```

### 3. è¯¦ç»†æ€§èƒ½åˆ†æ

#### Sharp ä¼˜åŠ¿
- âœ… **å¤„ç†é€Ÿåº¦**: å¹³å‡ 799msï¼Œæ¯” chroma-js å¿« 68.5 å€
- âœ… **å†…å­˜æ•ˆç‡**: 6.40 MBï¼Œæ¯” chroma-js å°‘ç”¨ 30.4%
- âœ… **åŠ è½½é€Ÿåº¦**: 1msï¼Œæ¯” chroma-js å¿« 118 å€
- âœ… **ç¨³å®šæ€§**: å¤„ç†æ—¶é—´æ³¢åŠ¨å° (æ ‡å‡†å·® 67ms)
- âœ… **åº•å±‚ä¼˜åŒ–**: C++ å®ç°ï¼Œæ€§èƒ½ä¼˜ç§€

#### chroma-js åŠ£åŠ¿
- âš ï¸ **å¤„ç†é€Ÿåº¦**: å¹³å‡ 54.7 ç§’ï¼Œæ¯” Sharp æ…¢ 68.5 å€
- âš ï¸ **å†…å­˜å ç”¨**: 9.19 MBï¼Œæ¯” Sharp å¤š 43.6%
- âš ï¸ **åŠ è½½é€Ÿåº¦**: 118msï¼Œæ¯” Sharp æ…¢ 118 å€
- âš ï¸ **æ€§èƒ½æ³¢åŠ¨**: å¤„ç†æ—¶é—´æ³¢åŠ¨å¤§ (æ ‡å‡†å·® 347ms)
- âš ï¸ **JavaScript é™åˆ¶**: é€åƒç´ å¤„ç†ï¼Œæ€§èƒ½ç“¶é¢ˆæ˜æ˜¾

## æ€§èƒ½ç“¶é¢ˆåˆ†æ

### Sharp æ€§èƒ½ä¼˜åŠ¿åŸå› 

1. **åº•å±‚ C++ å®ç°**
   - ç›´æ¥è°ƒç”¨ libvips åº“
   - å†…å­˜æ“ä½œä¼˜åŒ–
   - å¹¶è¡Œå¤„ç†æ”¯æŒ

2. **æµå¼å¤„ç†**
   - ä¸éœ€è¦åŠ è½½å®Œæ•´å›¾åƒåˆ°å†…å­˜
   - é€å—å¤„ç†ï¼Œå†…å­˜æ•ˆç‡é«˜
   - æ”¯æŒå¤§å›¾åƒå¤„ç†

3. **ç®—æ³•ä¼˜åŒ–**
   - ä½¿ç”¨é«˜æ•ˆçš„å›¾åƒå¤„ç†ç®—æ³•
   - ç¡¬ä»¶åŠ é€Ÿæ”¯æŒ
   - ä¼˜åŒ–çš„è‰²å½©ç©ºé—´è½¬æ¢

### chroma-js æ€§èƒ½ç“¶é¢ˆåŸå› 

1. **JavaScript é™åˆ¶**
   - å•çº¿ç¨‹å¤„ç†
   - é€åƒç´ å¾ªç¯å¤„ç†
   - æ— æ³•åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿ

2. **å†…å­˜ä½¿ç”¨**
   - éœ€è¦åŠ è½½å®Œæ•´å›¾åƒåˆ°å†…å­˜
   - å¤šæ¬¡è‰²å½©ç©ºé—´è½¬æ¢
   - å¤§é‡ä¸´æ—¶å¯¹è±¡åˆ›å»º

3. **ç®—æ³•å¤æ‚åº¦**
   - æ¯ä¸ªåƒç´ éƒ½è¦è¿›è¡Œ LCH è½¬æ¢
   - å¤æ‚çš„è‰²å½©ç©ºé—´è®¡ç®—
   - æ— æ³•æ‰¹é‡ä¼˜åŒ–

## å®é™…åº”ç”¨å»ºè®®

### 1. ç”Ÿäº§ç¯å¢ƒé€‰æ‹©

#### æ¨èä½¿ç”¨ Sharp çš„åœºæ™¯
- ğŸ¯ **Web åº”ç”¨**: éœ€è¦å¿«é€Ÿå“åº”ç”¨æˆ·æ“ä½œ
- ğŸ¯ **æ‰¹é‡å¤„ç†**: å¤„ç†å¤§é‡å›¾åƒæ–‡ä»¶
- ğŸ¯ **å®æ—¶é¢„è§ˆ**: ç”¨æˆ·è°ƒèŠ‚æ—¶çš„å®æ—¶åé¦ˆ
- ğŸ¯ **ç§»åŠ¨åº”ç”¨**: å†…å­˜å’Œæ€§èƒ½æ•æ„Ÿ
- ğŸ¯ **API æœåŠ¡**: éœ€è¦é«˜å¹¶å‘å¤„ç†

#### è°¨æ…ä½¿ç”¨ chroma-js çš„åœºæ™¯
- âš ï¸ **å¤§å›¾åƒå¤„ç†**: è¶…è¿‡ 1000x1000 åƒç´ 
- âš ï¸ **æ‰¹é‡å¤„ç†**: è¶…è¿‡ 10 å¼ å›¾åƒ
- âš ï¸ **å®æ—¶åº”ç”¨**: éœ€è¦å¿«é€Ÿå“åº”
- âš ï¸ **å†…å­˜æ•æ„Ÿ**: æœåŠ¡å™¨å†…å­˜æœ‰é™

### 2. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### Sharp ä¼˜åŒ–
```javascript
// ä½¿ç”¨æµå¼å¤„ç†
const pipeline = sharp(input)
  .modulate({ hue: tint })
  .linear(rMultiplier, 1, bMultiplier)
  .tiff();

// å¹¶è¡Œå¤„ç†å¤šä¸ªå›¾åƒ
const promises = images.map(img => processImage(img));
await Promise.all(promises);
```

#### chroma-js ä¼˜åŒ–
```javascript
// å‡å°‘è‰²å½©ç©ºé—´è½¬æ¢
const color = chroma([r, g, b]);
const lch = color.lch();
// ç›´æ¥ä¿®æ”¹ LCH å€¼ï¼Œé¿å…é‡å¤è½¬æ¢

// æ‰¹é‡å¤„ç†
const batchSize = 1000;
for (let i = 0; i < pixels.length; i += batchSize) {
  const batch = pixels.slice(i, i + batchSize);
  processBatch(batch);
}
```

### 3. æ··åˆä½¿ç”¨ç­–ç•¥

```javascript
class HybridImageProcessor {
  async processImage(imagePath, options) {
    const { quality, precision } = options;
    
    if (precision === 'high' && imageSize < 1000000) {
      // å°å›¾åƒä½¿ç”¨ chroma-js è·å¾—é«˜ç²¾åº¦
      return await this.chromaProcess(imagePath, options);
    } else {
      // å¤§å›¾åƒæˆ–å¿«é€Ÿå¤„ç†ä½¿ç”¨ Sharp
      return await this.sharpProcess(imagePath, options);
    }
  }
}
```

## ç»“è®º

### æ€§èƒ½æ€»ç»“
- **Sharp**: ç”Ÿäº§ç¯å¢ƒé¦–é€‰ï¼Œæ€§èƒ½ä¼˜ç§€ï¼Œé€‚åˆå¤§å¤šæ•°åº”ç”¨
- **chroma-js**: ä»…é€‚åˆå°å›¾åƒæˆ–é«˜ç²¾åº¦è¦æ±‚çš„ç‰¹æ®Šåœºæ™¯

### æœ€ç»ˆå»ºè®®
1. **é»˜è®¤é€‰æ‹© Sharp**: 99% çš„åœºæ™¯éƒ½åº”è¯¥ä½¿ç”¨ Sharp
2. **chroma-js ä»…é™ç‰¹æ®Šç”¨é€”**: å°å›¾åƒã€é«˜ç²¾åº¦ã€ç¦»çº¿å¤„ç†
3. **æ··åˆç­–ç•¥**: æ ¹æ®å›¾åƒå¤§å°å’Œç²¾åº¦è¦æ±‚åŠ¨æ€é€‰æ‹©
4. **æ€§èƒ½ç›‘æ§**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›‘æ§å¤„ç†æ—¶é—´å’Œå†…å­˜ä½¿ç”¨

**Sharp åœ¨æ— æŸè°ƒèŠ‚åœºæ™¯ä¸‹å…·æœ‰å‹å€’æ€§çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œæ˜¯å¼€å‘ç±»ä¼¼ Lightroom åŠŸèƒ½çš„æœ€ä½³é€‰æ‹©ï¼**
